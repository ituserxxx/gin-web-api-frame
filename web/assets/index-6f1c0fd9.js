import{d as L,a as S,x as P,h as V,N as B,l as K,z,i as q,b as u,o as c,c as g,e as t,f as n,u as e,s as C,w as d,I as O,g as b,t as o,k as w,P as E,F as D,n as W,G as X,E as Y,p as F,j as M,H as Z,m as tt,M as st,Q as et}from"./index-5d168430.js";const at={class:"record-list"},nt={class:"search-container"},ot={class:"list-container"},it=L({__name:"RecordList",emits:["info"],setup(a,{emit:s}){const m=S(0),h=S(!0);function y(){setTimeout(()=>{h.value=!1},500)}y();const{taskId:r,recordDetails:_}=P(V());function f(i,I){m.value=I,r.value=i.task_id,_.value=i,s("info",i),q.push({path:"/record",query:{task_id:i.task_id}})}const v="historyList",l="getHistoryList",p={search:""},{list:$,getList:T,search:N}=B({stateName:v,actionName:l,searchData:p}),U=K();return z($,i=>{const I=U.query.task_id;if(i.length)if(I)for(let k=0;k<i.length;k++)i[k].task_id===I&&(m.value=k,_.value=i[k],r.value=i[k].task_id,s("info",i[k]));else m.value=0,_.value=i[0],r.value=i[0].task_id,s("info",i[0]),q.push({path:"/record",query:{task_id:i[0].task_id}});else r.value="",s("info",{})}),T(),(i,I)=>{const k=u("m-input-search"),A=u("loaging"),G=u("a-list-item-meta"),Q=u("a-list-item"),J=u("m-list");return c(),g("div",at,[t("div",nt,[n(k,{modelValue:e(N).search,"onUpdate:modelValue":I[0]||(I[0]=R=>e(N).search=R),class:"search",placeholder:"填写老化产品",onSearch:e(T)},null,8,["modelValue","onSearch"])]),t("div",ot,[e(h)?(c(),C(A,{key:0,loading:e(h)},null,8,["loading"])):(c(),C(J,{key:1,"data-source":e($),split:!1,pagintaion:!1},{renderItem:d(({item:R,index:j})=>[n(Q,{class:O({highlight:e(m)===j}),onClick:is=>f(R,j)},{default:d(()=>[n(G,null,{title:d(()=>[b(o(R.products_name),1)]),description:d(()=>[b(o(R.end_time),1)]),_:2},1024)]),_:2},1032,["class","onClick"])]),_:1},8,["data-source"]))])])}}});const ct=w(it,[["__scopeId","data-v-37c15037"]]),x=a=>(F("data-v-a10e95f6"),a=a(),M(),a),_t={class:"record-info"},lt={class:"title-container"},dt={class:"title"},ut=x(()=>t("span",null,"查看历史事件",-1)),rt=x(()=>t("span",{class:"ageing-text"},"温控区间：",-1)),mt={class:"ageing-data"},vt=x(()=>t("span",{class:"ageing-text"},"老化时长：",-1)),gt={class:"ageing-data"},pt=x(()=>t("span",{class:"ageing-text"},"时间：",-1)),ht={class:"ageing-data"},ft=x(()=>t("span",{class:"ageing-text"},"设备标准电压：",-1)),yt={class:"ageing-data"},kt=x(()=>t("span",{class:"ageing-text"},"输入电压：",-1)),xt={class:"ageing-data"},$t=x(()=>t("span",{class:"ageing-text"},"下电时长：",-1)),It={class:"ageing-data"},bt=x(()=>t("span",{class:"ageing-text"},"上电时长：",-1)),St={class:"ageing-data"},Rt=L({__name:"RecordInfo",props:{item:E.object},setup(a){const s=S(!1);function m(){s.value=!0}return(h,y)=>{const r=u("svg-icon"),_=u("m-col"),f=u("m-row"),v=u("drawer-historical-event");return c(),g("div",_t,[t("div",lt,[t("div",dt,o(a.item.products_name),1),t("div",{class:"event-button",onClick:m},[ut,n(r,{class:"arrow-icon",name:"jiant_icon"})])]),n(f,{class:"ageing-info"},{default:d(()=>[n(_,{span:8},{default:d(()=>[rt,t("span",mt,o(a.item.temperature_min)+"°C ~ "+o(a.item.temperature_max)+"°C",1)]),_:1}),n(_,{span:6,xxl:8},{default:d(()=>[vt,t("span",gt,o(a.item.old_time)+"小时",1)]),_:1}),n(_,{span:10,xxl:8},{default:d(()=>[pt,t("span",ht,o(a.item.time1)+" ~ "+o(a.item.time2),1)]),_:1})]),_:1}),n(f,{class:"ageing-info"},{default:d(()=>[n(_,{span:8},{default:d(()=>[ft,t("span",yt,o(a.item.v_min)+"V ~ "+o(a.item.v_max)+"V",1)]),_:1}),n(_,{span:16},{default:d(()=>[kt,(c(!0),g(D,null,W(a.item.v_switch_order,(l,p)=>(c(),g(D,null,[t("span",xt,o(l)+"V",1),p!==a.item.v_switch_order.length-1?(c(),C(r,{key:0,class:"voltage-icon",name:"shunxfx_icon"})):X("",!0)],64))),256))]),_:1})]),_:1}),n(f,{class:"ageing-info"},{default:d(()=>[n(_,{span:8},{default:d(()=>[$t,t("span",It,o(a.item.v_rate===0?"不断电":a.item.v_rate+"分钟/次"),1)]),_:1}),n(_,{span:16},{default:d(()=>[bt,t("span",St,o(a.item.v_switch_wait_time===0?"立即切换":a.item.v_switch_wait_time+"分钟"),1)]),_:1})]),_:1}),n(v,{modelValue:e(s),"onUpdate:modelValue":y[0]||(y[0]=l=>Y(s)?s.value=l:null)},null,8,["modelValue"])])}}});const Ct=w(Rt,[["__scopeId","data-v-a10e95f6"]]),Lt="/assets/weipeiz_img@2x-5704aabc.png",H=a=>(F("data-v-72813978"),a=a(),M(),a),wt={class:"upload-results"},Tt={class:"content"},Nt=H(()=>t("div",{class:"title"},"数据上传至云服务",-1)),Ht={class:"upload-card"},Ut={key:0,class:"upload-container"},Dt={key:0,class:"upload-succeed"},Pt=H(()=>t("div",{class:"info"},[b(" 状态："),t("span",{style:{color:"#0dc55d"}},"已上传")],-1)),Vt={class:"info"},zt={class:"info"},jt={class:"info"},qt={key:1,class:"upload-medium"},Bt={class:"text-container"},Et={class:"value"},Ft={class:"value"},Mt={class:"text-container"},At={class:"value"},Gt={class:"value"},Qt={key:1,class:"no-config"},Jt=["src"],Kt={class:"no-config-container"},Ot=H(()=>t("div",{class:"no-config-text"},"暂时无法上传",-1)),Wt=H(()=>t("div",{class:"no-config-text"},"请先配置云服务的“HTTP”配置",-1)),Xt=L({__name:"UploadResults",setup(a){const s=S({status:null,time:"",config:{server:"",port:""}}),{taskId:m}=P(V()),{getHistorySyncInfo:h,getHistorySync:y}=Z(["getHistorySyncInfo","getHistorySync"]);function r(){const v={task_id:m.value};h(v).then(l=>{if(l.code===200){const{status:p,time:$}=l.data;l.data.config?s.value=l.data:(s.value.status=p,s.value.time=$,s.value.config={server:"",port:""})}})}z(()=>m.value,v=>{v&&r()},{immediate:!0});function _(){s.value.status=3;const v={task_id:m.value};y(v).then(l=>{l.code===200&&r()})}const{actions:f}=tt(["setting"]);return(v,l)=>{const p=u("a-button");return c(),g("div",wt,[t("div",Tt,[Nt,t("div",Ht,[e(s).config.server?(c(),g("div",Ut,[e(s).status===1?(c(),g("div",Dt,[Pt,t("div",Vt,"上传时间："+o(e(s).time),1),t("div",zt,"服务器地址："+o(e(s).config.server),1),t("div",jt,"端口："+o(e(s).config.port),1)])):(c(),g("div",qt,[t("div",Bt,[t("div",Et,[b(" 状态："),t("span",{style:st({color:e(s).status===0||e(s).status===2?"#f53a4e":"#0dc55d"})},o(e(s).status===0||e(s).status===2?"上传失败，请重新上传":"上传中..."),5)]),t("div",Ft,"服务器地址："+o(e(s).config.server),1)]),t("div",Mt,[t("div",At,"上传时间："+o(e(s).time||"--"),1),t("div",Gt,"端口："+o(e(s).config.port),1)]),n(p,{class:"button",type:"primary",disabled:e(s).status===3,onClick:_},{default:d(()=>[b("上传")]),_:1},8,["disabled"])]))])):(c(),g("div",Qt,[t("img",{class:"no-config-img",src:e(Lt),alt:"pc"},null,8,Jt),t("div",Kt,[Ot,Wt,n(p,{class:"button",type:"primary",onClick:e(f).handleSetting},{default:d(()=>[b("配置")]),_:1},8,["onClick"])])]))])]),n(et,{modelValue:e(f).showSetting,"onUpdate:modelValue":l[0]||(l[0]=$=>e(f).showSetting=$),name:"HTTP",item:{},onCallback:r},null,8,["modelValue"])])}}});const Yt=w(Xt,[["__scopeId","data-v-72813978"]]),Zt={class:"record-details"},ts={key:0,class:"content"},ss=L({__name:"RecordDetails",props:{item:E.object},setup(a){const s="vPointList",m="getVPointList",h={task_id:""},{list:y,getList:r,search:_}=B({stateName:s,actionName:m,searchData:h}),{taskId:f}=P(V());z(()=>f.value,p=>{p!==""&&(_.task_id=p,r())},{immediate:!0});const v=S(!0);function l(){setTimeout(()=>{v.value=!1},500)}return l(),(p,$)=>{const T=u("loaging"),N=u("aging-details"),U=u("device-info"),i=u("m-empty");return c(),g("div",Zt,[e(v)?(c(),C(T,{key:0,loading:e(v)},null,8,["loading"])):(c(),g(D,{key:1},[a.item.task_id?(c(),g("div",ts,[n(Ct,{item:a.item},null,8,["item"]),n(Yt),n(N,{item:e(y)},null,8,["item"]),n(U,{class:"device-info"})])):(c(),C(i,{key:1}))],64))])}}});const es=w(ss,[["__scopeId","data-v-96b0c99d"]]),as={class:"record"},ns={class:"content"},os=L({__name:"index",setup(a){const s=S({});function m(h){s.value=e(h)}return(h,y)=>{const r=u("title-tag"),_=u("card-content");return c(),g("div",as,[n(r,{title:"历史记录"}),t("div",ns,[n(_,null,{default:d(()=>[n(ct,{onInfo:m}),n(es,{item:e(s)},null,8,["item"])]),_:1})])])}}});const _s=w(os,[["__scopeId","data-v-8bb84b43"]]);export{_s as default};
